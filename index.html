<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å†è¯„åˆ†å·¥å…· - åº”å±Šç”Ÿä¸“ç‰ˆ</title>
    <meta name="description" content="ä¸“ä¸šçš„åº”å±Šç”Ÿç®€å†è¯„åˆ†å·¥å…·ï¼Œæä¾›è¯¦ç»†åˆ†æã€å²—ä½æ¨èå’Œæ”¹è¿›å»ºè®®">
    <meta name="keywords" content="ç®€å†è¯„åˆ†,ç®€å†åˆ†æ,åº”å±Šç”Ÿ,æ±‚èŒ,å²—ä½æ¨è">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <link rel="stylesheet" href="style.css">
    
    <!-- æ·»åŠ  favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“</text></svg>">
    
    <!-- è½»é‡çº§NLPåº“ç”¨äºå…³é”®è¯æå– -->
    <script src="https://cdn.jsdelivr.net/npm/compromise@14.10.0/builds/compromise.min.js" 
            onerror="handleCDNError('nlp')" 
            async></script>
    
    <!-- CDN èµ„æº -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js" 
            onerror="handleCDNError('pdf')" 
            async></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js" 
            onerror="handleCDNError('mammoth')" 
            async></script>
</head>
<body>
    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="åˆ‡æ¢ä¸»é¢˜">
        <span class="theme-icon">ğŸŒ™</span>
    </button>
    
    <!-- AIå…³é”®è¯æå–åˆ‡æ¢æŒ‰é’® -->
    <div class="ai-toggle" onclick="toggleAIMode()" aria-label="åˆ‡æ¢AIå…³é”®è¯æå–">
        <div class="ai-icon">ğŸ”</div>
        <div class="ai-status" id="aiStatus">AI</div>
    </div>
    
    <!-- è¯­è¨€åˆ‡æ¢ -->
    <div class="language-toggle">
        <button onclick="toggleLanguage()" class="lang-btn">
            <span id="langText">EN</span>
        </button>
    </div>
    
    <div class="container">
        <header>
            <h1 data-lang="title">ğŸ“ åº”å±Šç”Ÿç®€å†è¯„åˆ†å·¥å…·</h1>
            <p data-lang="subtitle">ä¸“ä¸šè¯„ä¼° â€¢ å²—ä½æ¨è â€¢ æå‡å»ºè®®</p>
        </header>
        
        <!-- ä¸Šä¼ åŒºåŸŸ -->
        <section class="upload-section">
            <div class="upload-card">
                <!-- AIçŠ¶æ€æ˜¾ç¤º -->
                <div class="ai-status-display" id="aiStatusDisplay" style="display: none;">
                    <span class="status-icon">ğŸ”</span>
                    <span class="status-text" id="aiStatusText">AIå…³é”®è¯æå–å‡†å¤‡å°±ç»ª</span>
                </div>

                <div class="ai-mode-info" id="aiModeInfo" style="display: none;">
                    <div class="ai-info-content">
                        <span class="ai-info-icon">ğŸ§ </span>
                        <span>AIå…³é”®è¯æå–å·²å¯ç”¨ - æ™ºèƒ½è¯†åˆ«ç®€å†å…³é”®ä¿¡æ¯ï¼Œå‡å°‘é‡å¤å’Œé—æ¼</span>
                    </div>
                </div>

                <h2 data-lang="upload-title">ğŸ“„ ä¸Šä¼ ç®€å†</h2>
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">ğŸ“</div>
                    <p data-lang="upload-hint">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                    <p class="upload-hint" data-lang="file-types">æ”¯æŒ PDFã€Word æ ¼å¼ï¼Œæœ€å¤§ 10MB</p>
                    <input type="file" id="fileInput" accept=".pdf,.doc,.docx" style="display: none;" multiple="false">
                    <button class="upload-btn" onclick="document.getElementById('fileInput').click()" data-lang="select-file">
                        é€‰æ‹©æ–‡ä»¶
                    </button>
                </div>
                
                <div class="divider">
                    <span data-lang="or">æˆ–</span>
                </div>
                
                <div class="text-input">
                    <h3 data-lang="paste-title">ğŸ“ ç›´æ¥ç²˜è´´ç®€å†å†…å®¹</h3>
                    <textarea 
                        id="resumeText" 
                        data-lang-placeholder="paste-placeholder"
                        placeholder="è¯·å°†ç®€å†å†…å®¹ç²˜è´´åˆ°è¿™é‡Œ..."
                        rows="8"
                        spellcheck="false"
                    ></textarea>
                    <div class="textarea-toolbar">
                        <span class="char-count" id="charCount">0 å­—ç¬¦</span>
                        <button class="clear-btn" onclick="clearTextarea()" data-lang="clear">æ¸…ç©º</button>
                    </div>
                    <button class="analyze-btn" onclick="analyzeResume()" disabled data-lang="analyze">
                        <span class="btn-icon">ğŸ”</span>
                        <span class="btn-text">å¼€å§‹åˆ†æ</span>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
        <section class="result-section" id="resultSection" style="display: none;">
            <div class="result-card">
                <!-- æ€»åˆ†å±•ç¤º -->
                <div class="score-overview">
                    <div class="total-score">
                        <div class="score-circle" id="scoreCircle">
                            <span class="score-number" id="totalScore">0</span>
                            <span class="score-suffix" data-lang="score-suffix">åˆ†</span>
                        </div>
                        <div class="score-info">
                            <h2 id="scoreLevel" data-lang="evaluating">è¯„ä¼°ä¸­...</h2>
                            <p id="scoreSummary" data-lang="analyzing">æ­£åœ¨åˆ†ææ‚¨çš„ç®€å†...</p>
                        </div>
                    </div>
                    
                    <!-- AIåˆ†ææ ‡è¯† -->
                    <div class="ai-analysis-badge" id="aiAnalysisBadge" style="display: none;">
                        <span class="ai-badge-icon">ğŸ”</span>
                        <span class="ai-badge-text">AIå…³é”®è¯æå–å®Œæˆ</span>
                    </div>
                    
                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="action-buttons">
                        <button class="export-btn" onclick="exportResults()" data-lang="export">
                            ğŸ“¥ å¯¼å‡ºæŠ¥å‘Š
                        </button>
                        <button class="share-btn" onclick="shareResults()" data-lang="share">
                            ğŸ”— åˆ†äº«ç»“æœ
                        </button>
                        <button class="analyze-again-btn" onclick="analyzeAgain()" data-lang="analyze-again">
                            ğŸ”„ é‡æ–°åˆ†æ
                        </button>
                    </div>
                </div>
                
                <!-- è¯¦ç»†è¯„åˆ† -->
                <div class="detailed-scores">
                    <h3 data-lang="detailed-scores">ğŸ“Š è¯¦ç»†è¯„åˆ†</h3>
                    <div class="score-categories" id="scoreCategories">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- å²—ä½æ¨è -->
                <div class="job-recommendations">
                    <h3 data-lang="job-recommendations">ğŸ¯ å²—ä½æ¨è</h3>
                    <div class="job-list" id="jobList">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- æ”¹è¿›å»ºè®® -->
                <div class="suggestions">
                    <h3 data-lang="suggestions">ğŸ’¡ æ”¹è¿›å»ºè®®</h3>
                    <div class="suggestion-list" id="suggestionList">
                        <!-- åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </section>
        
        <footer>
            <p data-lang="footer">Made with â¤ï¸ for åº”å±Šæ¯•ä¸šç”Ÿ | <a href="https://github.com/yourusername/resume-scorer" target="_blank">GitHub</a></p>
        </footer>
    </div>
    
    <!-- åŠ è½½æç¤º -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingText" data-lang="loading">æ­£åœ¨å¤„ç†ä¸­...</p>
        </div>
    </div>
    
    <!-- Toast é€šçŸ¥ -->
    <div class="toast-container" id="toastContainer"></div>
    
    <!-- é”®ç›˜å¿«æ·é”®å¸®åŠ© -->
    <div class="keyboard-shortcuts" id="keyboardShortcuts" style="display: none;">
        <h3>âŒ¨ï¸ é”®ç›˜å¿«æ·é”®</h3>
        <div class="shortcut-list">
            <div><kbd>Ctrl</kbd> + <kbd>U</kbd> - ä¸Šä¼ æ–‡ä»¶</div>
            <div><kbd>Ctrl</kbd> + <kbd>Enter</kbd> - å¼€å§‹åˆ†æ</div>
            <div><kbd>Ctrl</kbd> + <kbd>E</kbd> - å¯¼å‡ºæŠ¥å‘Š</div>
            <div><kbd>Ctrl</kbd> + <kbd>I</kbd> - åˆ‡æ¢AIæ¨¡å¼</div>
            <div><kbd>F1</kbd> - æ˜¾ç¤º/éšè—å¿«æ·é”®</div>
            <div><kbd>Esc</kbd> - å…³é—­å¼¹çª—</div>
        </div>
    </div>
    
    <script>
        // CDN é”™è¯¯å¤„ç†
        function handleCDNError(type) {
            const errorMessages = {
                'nlp': 'NLPåº“åŠ è½½å¤±è´¥ï¼ŒAIå…³é”®è¯æå–åŠŸèƒ½å°†ä¸å¯ç”¨',
                'pdf': 'PDF.jsåº“åŠ è½½å¤±è´¥ï¼Œå¯èƒ½å½±å“PDFæ–‡ä»¶è§£æ',
                'mammoth': 'Wordè§£æåº“åŠ è½½å¤±è´¥ï¼Œå¯èƒ½å½±å“Wordæ–‡ä»¶è§£æ'
            };
            
            console.warn(`${type} CDN failed, using fallback`);
            // å»¶è¿Ÿæ˜¾ç¤ºé”™è¯¯ï¼Œç¡®ä¿appå·²åˆå§‹åŒ–
            setTimeout(() => {
                if (window.app && window.app.showToast) {
                    window.app.showToast(errorMessages[type] || `${type} åº“åŠ è½½å¤±è´¥`, 'warning');
                }
            }, 2000);
        }
        
        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            try {
                if (typeof initializeApp === 'function') {
                    initializeApp();
                } else {
                    console.error('initializeApp function not found');
                    // æ‰‹åŠ¨åˆ›å»ºåº”ç”¨å®ä¾‹
                    if (typeof ResumeScoreApp !== 'undefined') {
                        window.app = new ResumeScoreApp();
                    }
                }
            } catch (error) {
                console.error('App initialization failed:', error);
            }
        }
        
        // ç¡®ä¿DOMå®Œå…¨åŠ è½½åå†åˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            // DOMå·²ç»åŠ è½½å®Œæˆ
            setTimeout(initApp, 100);
        }
    </script>
    
    <script src="i18n.js"></script>
    <script src="ai-keyword-extractor.js"></script>
    <script src="resume-parser.js"></script>
    <script src="script.js"></script>
</body>
</html>
